/* Copyright 2007-8 Google. */ (function() { function g(a){throw a;}
var i=true,j=null,k=false,m,aa=aa||{},p=this,q=".",ba="var ",ca=function(a,b,c){a=a.split(q);c=c||p;!(a[0]in c)&&c.execScript&&c.execScript(ba+a[0]);for(var d;a.length&&(d=a.shift());)if(!a.length&&b!==undefined)c[d]=b;else c=c[d]?c[d]:(c[d]={})},da=function(a,b){a=a.split(q);b=b||p;for(var c;c=a.shift();)if(b[c])b=b[c];else return j;return b},ea=function(){},s="object",fa="[object Array]",t="number",ga="splice",u="array",ha="[object Function]",ia="call",w="function",ja="null",x=function(a){var b=
typeof a;if(b==s)if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)==fa||typeof a.length==t&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable(ga))return u;if(!(a instanceof Object)&&(Object.prototype.toString.call(a)==ha||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable(ia)))return w}else return ja;else if(b==w&&typeof a.call=="undefined")return s;return b},y=function(a){var b=
x(a);return b==u||b==s&&typeof a.length==t},ka="string",z=function(a){return typeof a==ka},la=function(a){a=x(a);return a==s||a==u||a==w},B=function(a){if(a.hasOwnProperty&&a.hasOwnProperty(A))return a[A];a[A]||(a[A]=++ma);return a[A]},A="closure_hashCode_"+Math.floor(Math.random()*2147483648).toString(36),ma=0,C=function(a,b){var c=a.boundArgs_;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);c&&d.unshift.apply(d,c);c=d}b=a.boundSelf_||b;a=a.boundFn_||a;var f=b||p;d=c?function(){var e=
Array.prototype.slice.call(arguments);e.unshift.apply(e,c);return a.apply(f,e)}:function(){return a.apply(f,arguments)};d.boundArgs_=c;d.boundSelf_=b;d.boundFn_=a;return d},na=function(a){var b=Array.prototype.slice.call(arguments,1);b.unshift(a,j);return C.apply(j,b)},oa=Date.now||function(){return(new Date).getTime()},D=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c};
Function.prototype.partial=function(){var a=Array.prototype.slice.call(arguments);a.unshift(this,j);return C.apply(j,a)};var pa=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);if(Array.indexOf)return Array.indexOf(a,b,c);for(c=c==j?0:c<0?Math.max(0,a.length+c):c;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},E="",qa=function(a,b,c){if(a.forEach)a.forEach(b,c);else if(Array.forEach)Array.forEach(a,b,c);else for(var d=a.length,f=z(a)?a.split(E):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},F=function(a,b){if(a.contains)return a.contains(b);return pa(a,b)>-1},ra=function(a,b){b=pa(a,b);var c;if(c=b!=-1)Array.prototype.splice.call(a,
b,1).length==1;return c},ta=function(a){return Array.prototype.splice.apply(a,sa(arguments,1))},sa=function(a,b,c){return arguments.length<=2?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};var ua=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)},va=function(a){var b=[],c=0;for(var d in a)b[c++]=a[d];return b},wa=function(a){var b=[],c=0;for(var d in a)b[c++]=d;return b},xa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ya=function(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var f=0;f<xa.length;f++){b=xa[f];if(Object.prototype.hasOwnProperty.call(c,b))a[b]=c[b]}}};var G=function(){};G.prototype.disposed_=k;G.prototype.dispose=function(){if(!this.disposed_){this.disposed_=i;this.disposeInternal()}};G.prototype.disposeInternal=function(){};var H=function(a,b){G.call(this);this.maxCount_=b;this.freeQueue_=[];this.createInitial_(a)};D(H,G);m=H.prototype;m.createObjectFn_=j;m.disposeObjectFn_=j;m.setCreateObjectFn=function(a){this.createObjectFn_=a};m.setDisposeObjectFn=function(a){this.disposeObjectFn_=a};m.getObject=function(){if(this.freeQueue_.length)return this.freeQueue_.pop();return this.createObject()};m.releaseObject=function(a){this.freeQueue_.length<this.maxCount_?this.freeQueue_.push(a):this.disposeObject(a)};
m.createInitial_=function(a){if(a>this.maxCount_)g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var b=0;b<a;b++)this.freeQueue_.push(this.createObject())};m.createObject=function(){return this.createObjectFn_?this.createObjectFn_():{}};m.disposeObject=function(a){if(this.disposeObjectFn_)this.disposeObjectFn_(a);else if(x(a.dispose)==w)a.dispose();else for(var b in a)delete a[b]};
m.disposeInternal=function(){H.superClass_.disposeInternal.call(this);for(var a=this.freeQueue_;a.length;)this.disposeObject(a.pop());delete this.freeQueue_};var za=function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,E)},Aa=function(a,b){return a.indexOf(b)!=-1},Ba="(\\d*)(\\D*)",Ca="g",Ea=function(a,b){var c=0;a=za(String(a)).split(q);b=za(String(b)).split(q);for(var d=Math.max(a.length,b.length),f=0;c==0&&f<d;f++){var e=a[f]||E,h=b[f]||E,l=new RegExp(Ba,Ca),n=new RegExp(Ba,Ca);do{var o=l.exec(e)||[E,E,E],r=n.exec(h)||[E,E,E];if(o[0].length==0&&r[0].length==0)break;c=o[1].length==0?0:parseInt(o[1],10);var v=r[1].length==0?0:parseInt(r[1],10);c=Da(c,
v)||Da(o[2].length==0,r[2].length==0)||Da(o[2],r[2])}while(c==0)}return c},Da=function(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};oa();var I,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa=function(){return p.navigator?p.navigator.userAgent:j},Pa=function(){return p.navigator},Qa="Opera",Ra="MSIE",Sa="WebKit",Ta="Mobile",Ua="Gecko",Va="Camino";(function(){Ja=Ia=Ha=Ga=Fa=I=k;var a;if(a=Oa()){var b=Pa();I=a.indexOf(Qa)==0;Fa=!I&&a.indexOf(Ra)!=-1;Ha=(Ga=!I&&a.indexOf(Sa)!=-1)&&a.indexOf(Ta)!=-1;Ja=(Ia=!I&&!Ga&&b.product==Ua)&&b.vendor==Va}})();
var Wa=I,Xa=Fa,J=Ia,Ya=Ga,Za=function(){var a=Pa();return a&&a.platform||E}(),$a="Mac",ab="Win",bb="Linux",cb="X11";(function(){Ka=Aa(Za,$a);La=Aa(Za,ab);Ma=Aa(Za,bb);Na=!!Pa()&&Aa(Pa().appVersion||E,cb)})();var db=function(){var a=E,b;if(Wa&&p.opera){a=p.opera.version;a=typeof a==w?a():a}else{if(J)b=/rv\:([^\);]+)(\)|;)/;else if(Xa)b=/MSIE\s+([^\);]+)(\)|;)/;else if(Ya)b=/WebKit\/(\S+)/;if(b)a=(a=b.exec(Oa()))?a[1]:E}return a}(),eb={};var K=function(a,b){this.type=a;this.currentTarget=this.target=b};D(K,G);K.prototype.disposeInternal=function(){delete this.type;delete this.target;delete this.currentTarget};K.prototype.propagationStopped_=k;K.prototype.returnValue_=i;K.prototype.preventDefault=function(){this.returnValue_=k};var L=function(a,b){a&&this.init(a,b)};D(L,K);m=L.prototype;m.type=j;m.target=j;m.relatedTarget=j;m.offsetX=0;m.offsetY=0;m.clientX=0;m.clientY=0;m.screenX=0;m.screenY=0;m.button=0;m.keyCode=0;m.charCode=0;m.ctrlKey=k;m.altKey=k;m.shiftKey=k;m.metaKey=k;m.event_=j;var fb="mouseover",gb="mouseout",hb="keypress";
m.init=function(a,b){this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;this.relatedTarget=a.relatedTarget?a.relatedTarget:this.type==fb?a.fromElement:this.type==gb?a.toElement:j;this.offsetX=typeof a.layerX==t?a.layerX:a.offsetX;this.offsetY=typeof a.layerY==t?a.layerY:a.offsetY;this.clientX=typeof a.clientX==t?a.clientX:a.pageX;this.clientY=typeof a.clientY==t?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||
0;this.charCode=a.charCode||(this.type==hb?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.event_=a;delete this.returnValue_;delete this.propagationStopped_};m.preventDefault=function(){this.returnValue_=k;if(this.event_.preventDefault)this.event_.preventDefault();else{this.event_.returnValue=k;try{this.event_.keyCode=-1}catch(a){}}};m.disposeInternal=function(){L.superClass_.disposeInternal.call(this);this.event_=j};var ib=function(){},jb=0;m=ib.prototype;m.key=0;m.removed=k;m.callOnce=k;m.init=function(a,b,c,d,f,e){if(x(a)==w)this.isFunctionListener_=i;else if(a&&a.handleEvent&&x(a.handleEvent)==w)this.isFunctionListener_=k;else g(Error("Invalid listener argument"));this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!f;this.handler=e;this.callOnce=k;this.key=++jb;this.removed=k};
m.handleEvent=function(a){if(this.isFunctionListener_)return this.listener.call(this.handler||this.src,a);return this.listener.handleEvent.call(this.listener,a)};var M={},N={},O={},P=new H(0,600);P.setCreateObjectFn(function(){return{count_:0,remaining_:0}});P.setDisposeObjectFn(function(a){a.count_=0});var Q=new H(0,600);Q.setCreateObjectFn(function(){return[]});Q.setDisposeObjectFn(function(a){a.length=0;delete a.locked_;delete a.needsCleanup_});var kb=new H(0,600);kb.setCreateObjectFn(function(){var a=function(b){return lb.call(a.src,a.key,b)};return a});var mb=function(){return new ib},nb=new H(0,600);nb.setCreateObjectFn(mb);
var ob=function(){return new L},pb=function(){var a=j;if(Xa){a=new H(0,600);a.setCreateObjectFn(ob)}return a}(),qb={},R=function(a,b,c,d,f){if(b)if(x(b)==u){for(var e=0;e<b.length;e++)R(a,b[e],c,d,f);return j}else{d=!!d;var h=N;b in h||(h[b]=P.getObject());h=h[b];if(!(d in h)){h[d]=P.getObject();h.count_++}h=h[d];var l=B(a),n;h.remaining_++;if(h[l]){n=h[l];for(e=0;e<n.length;e++){h=n[e];if(h.listener==c&&h.handler==f){if(h.removed)break;return n[e].key}}}else{n=h[l]=Q.getObject();h.count_++}e=kb.getObject();
e.src=a;h=nb.getObject();h.init(c,e,a,b,d,f);c=h.key;e.key=c;n.push(h);M[c]=h;O[l]||(O[l]=Q.getObject());O[l].push(h);if(a.addEventListener){if(a==p||!a.customEvent_)a.addEventListener(b,e,d)}else a.attachEvent(rb(b),e);return c}else g(Error("Invalid event type"))},sb=function(a,b,c,d,f){if(x(b)==u){for(var e=0;e<b.length;e++)sb(a,b[e],c,d,f);return j}a=R(a,b,c,d,f);M[a].callOnce=i;return a},tb=function(a,b,c,d,f){if(x(b)==u){for(var e=0;e<b.length;e++)tb(a,b[e],c,d,f);return j}d=!!d;a:{e=N;if(b in
e){e=e[b];if(d in e){e=e[d];a=B(a);if(e[a]){a=e[a];break a}}}a=j}if(!a)return k;for(e=0;e<a.length;e++)if(a[e].listener==c&&a[e].capture==d&&a[e].handler==f)return ub(a[e].key);return k},ub=function(a){if(!M[a])return k;var b=M[a];if(b.removed)return k;var c=b.src,d=b.type,f=b.proxy,e=b.capture;if(c.removeEventListener){if(c==p||!c.customEvent_)c.removeEventListener(d,f,e)}else c.detachEvent&&c.detachEvent(rb(d),f);c=B(c);f=N[d][e][c];if(O[c]){var h=O[c];ra(h,b);h.length==0&&delete O[c]}b.removed=
i;f.needsCleanup_=i;vb(d,e,c,f);delete M[a];return i},vb=function(a,b,c,d){if(!d.locked_)if(d.needsCleanup_){for(var f=0,e=0;f<d.length;f++)if(d[f].removed)nb.releaseObject(d[f]);else{if(f!=e)d[e]=d[f];e++}d.length=e;d.needsCleanup_=k;if(e==0){Q.releaseObject(d);delete N[a][b][c];N[a][b].count_--;if(N[a][b].count_==0){P.releaseObject(N[a][b]);delete N[a][b];N[a].count_--}if(N[a].count_==0){P.releaseObject(N[a]);delete N[a]}}}},wb=function(a,b,c){var d=0,f=a==j,e=b==j,h=c==j;c=!!c;if(f)ua(O,function(n){for(var o=
n.length-1;o>=0;o--){var r=n[o];if((e||b==r.type)&&(h||c==r.capture)){ub(r.key);d++}}});else{a=B(a);if(O[a]){a=O[a];for(f=a.length-1;f>=0;f--){var l=a[f];if((e||b==l.type)&&(h||c==l.capture)){ub(l.key);d++}}}}return d},xb="on",rb=function(a){if(a in qb)return qb[a];return qb[a]=xb+a},S=function(a,b,c,d,f){var e=1;b=B(b);if(a[b]){a.remaining_--;a=a[b];if(a.locked_)a.locked_++;else a.locked_=1;try{for(var h=a.length,l=0;l<h;l++){var n=a[l];if(n&&!n.removed)e&=yb(n,f)!==k}}finally{a.locked_--;vb(c,d,
b,a)}}return Boolean(e)},yb=function(a,b){b=a.handleEvent(b);a.callOnce&&ub(a.key);return b},zb="window.event",lb=function(a,b){if(!M[a])return i;a=M[a];var c=a.type,d=N;if(!(c in d))return i;d=d[c];var f,e;if(Xa){f=b||da(zb);b=i in d;var h=k in d;if(b){if(f.keyCode<0||f.returnValue!=undefined)return i;a:{var l=k;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(n){l=i}if(l||f.returnValue==undefined)f.returnValue=i}}l=pb.getObject();l.init(f,this);f=i;try{if(b){for(var o=Q.getObject(),r=l.currentTarget;r;r=
r.parentNode)o.push(r);e=d[i];e.remaining_=e.count_;for(var v=o.length-1;!l.propagationStopped_&&v>=0&&e.remaining_;v--){l.currentTarget=o[v];f&=S(e,o[v],c,i,l)}if(h){e=d[k];e.remaining_=e.count_;for(v=0;!l.propagationStopped_&&v<o.length&&e.remaining_;v++){l.currentTarget=o[v];f&=S(e,o[v],c,k,l)}}}else f=yb(a,l)}finally{if(o){o.length=0;Q.releaseObject(o)}l.dispose();pb.releaseObject(l)}return f}e=new L(b,this);try{f=yb(a,e)}finally{e.dispose()}return f};var T=function(){};D(T,G);m=T.prototype;m.customEvent_=i;m.parentEventTarget_=j;m.addEventListener=function(a,b,c,d){R(this,a,b,c,d)};m.removeEventListener=function(a,b,c,d){tb(this,a,b,c,d)};
m.dispatchEvent=function(a){a=a;if(z(a))a=new K(a,this);else if(a instanceof K)a.target=a.target||this;else{var b=a;a=new K(a.type,this);ya(a,b)}b=1;var c,d=a.type,f=N;if(d in f){f=f[d];d=i in f;var e;if(d){c=[];for(e=this;e;e=e.parentEventTarget_)c.push(e);e=f[i];e.remaining_=e.count_;for(var h=c.length-1;!a.propagationStopped_&&h>=0&&e.remaining_;h--){a.currentTarget=c[h];b&=S(e,c[h],a.type,i,a)&&a.returnValue_!=k}}if(k in f){e=f[k];e.remaining_=e.count_;if(d)for(h=0;!a.propagationStopped_&&h<c.length&&
e.remaining_;h++){a.currentTarget=c[h];b&=S(e,c[h],a.type,k,a)&&a.returnValue_!=k}else for(c=this;!a.propagationStopped_&&c&&e.remaining_;c=c.parentEventTarget_){a.currentTarget=c;b&=S(e,c,a.type,k,a)&&a.returnValue_!=k}}a=Boolean(b)}else a=i;return a};m.disposeInternal=function(){T.superClass_.disposeInternal.call(this);wb(this);this.parentEventTarget_=j};var Ab=function(a,b){b.preventDefault();a(b);return k};var U=" ",Bb=function(a){return(a=a.className)&&typeof a.split==w?a.split(U):[]},Cb=function(a){var b=Bb(a),c;c=sa(arguments,1);for(var d=0,f=0;f<c.length;f++)if(!F(b,c[f])){b.push(c[f]);d++}c=d==c.length;a.className=b.join(U);return c},Db=function(a){var b=Bb(a),c;c=sa(arguments,1);for(var d=0,f=0;f<b.length;f++)if(F(c,b[f])){ta(b,f--,1);d++}c=d==c.length;a.className=b.join(U);return c},Eb=function(a,b){var c=!F(Bb(a),b);c?Cb(a,b):Db(a,b);return c};var Fb="*",Gb="CSS1Compat",Hb="528",Ib=function(a,b,c,d){d=d||a;b=b&&b!=Fb?b.toLowerCase():E;if(d.querySelectorAll&&(b||c)&&(!Ya||a.compatMode==Gb||eb[Hb]||(eb[Hb]=Ea(db,Hb)>=0)))return d.querySelectorAll(b+(c?q+c:E));if(c&&d.getElementsByClassName){a=d.getElementsByClassName(c);if(b){d={};for(var f=0,e=0,h;h=a[e];e++)if(b==h.nodeName.toLowerCase())d[f++]=h;d.length=f;return d}else return a}a=d.getElementsByTagName(b||Fb);if(c){d={};for(e=f=0;h=a[e];e++){b=h.className;if(typeof b.split==w&&F(b.split(U),
c))d[f++]=h}d.length=f;return d}else return a};Ya&&(eb["522"]||(eb["522"]=Ea(db,"522")>=0));
var Jb={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Kb="\n",Lb={IMG:U,BR:Kb},Mb="innerText",Ob=function(a){if(Xa&&Mb in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,Kb);else{var b=[];Nb(a,b,i);a=b.join(E)}a=a.replace(/\xAD/g,E);a=a.replace(/ +/g,U);if(a!=U)a=a.replace(/^\s*/,E);return a},Nb=function(a,b,c){if(!(a.nodeName in Jb))if(a.nodeType==3)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,E)):b.push(a.nodeValue);else if(a.nodeName in Lb)b.push(Lb[a.nodeName]);else for(a=a.firstChild;a;){Nb(a,b,
c);a=a.nextSibling}};if("StopIteration"in p)var V=p.StopIteration;else V=Error("StopIteration");var W=function(){};W.prototype.next=function(){g(V)};W.prototype.__iterator__=function(){return this};
var Pb=function(a){if(a instanceof W)return a;if(typeof a.__iterator__==w)return a.__iterator__(k);if(y(a)){var b=0,c=new W;c.next=function(){for(;1;){if(b>=a.length)g(V);if(b in a)return a[b++];else b++}};return c}g(Error("Not implemented"))},Qb=function(a,b,c){if(y(a))try{qa(a,b,c)}catch(d){if(d!==V)g(d)}else{a=Pb(a);try{for(;1;)b.call(c,a.next(),undefined,a)}catch(f){if(f!==V)g(f)}}};var Rb=function(a){if(typeof a.getValues==w)return a.getValues();if(z(a))return a.split(E);if(y(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return va(a)},Sb=function(a){if(typeof a.getKeys==w)return a.getKeys();if(typeof a.getValues==w)return undefined;if(y(a)||z(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return wa(a)},Tb=function(a,b,c){if(typeof a.forEach==w)a.forEach(b,c);else if(y(a)||z(a))qa(a,b,c);else for(var d=Sb(a),f=Rb(a),e=f.length,h=0;h<e;h++)b.call(c,
f[h],d&&d[h],a)};var X=function(a){this.map_={};this.keys_=[];var b=arguments.length;if(b>1){if(b%2)g(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else a&&this.addAll(a)};m=X.prototype;m.count_=0;m.version_=0;m.getValues=function(){this.cleanupKeysArray_();for(var a=[],b=0;b<this.keys_.length;b++)a.push(this.map_[this.keys_[b]]);return a};m.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};m.containsKey=function(a){return Y(this.map_,a)};
m.remove=function(a){if(Y(this.map_,a)){delete this.map_[a];this.count_--;this.version_++;this.keys_.length>2*this.count_&&this.cleanupKeysArray_();return i}return k};
m.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];if(Y(this.map_,c))this.keys_[b++]=c;a++}this.keys_.length=b}if(this.count_!=this.keys_.length){var d={};for(b=a=0;a<this.keys_.length;){c=this.keys_[a];if(!Y(d,c)){this.keys_[b++]=c;d[c]=1}a++}this.keys_.length=b}};m.get=function(a,b){if(Y(this.map_,a))return this.map_[a];return b};
m.set=function(a,b){if(!Y(this.map_,a)){this.count_++;this.keys_.push(a);this.version_++}this.map_[a]=b};m.addAll=function(a){var b;if(a instanceof X){b=a.getKeys();a=a.getValues()}else{b=wa(a);a=va(a)}for(var c=0;c<b.length;c++)this.set(b[c],a[c])};m.clone=function(){return new X(this)};m.getKeyIterator=function(){return this.__iterator__(i)};
m.__iterator__=function(a){this.cleanupKeysArray_();var b=0,c=this.keys_,d=this.map_,f=this.version_,e=this,h=new W;h.next=function(){for(;1;){if(f!=e.version_)g(Error("The map has changed since the iterator was created"));if(b>=c.length)g(V);var l=c[b++];return a?l:d[l]}};return h};var Y=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Ub="@",Vb="]",Wb="(",Xb=")",Yb=function(a){a=String(a);var b;b=/^\s*$/.test(a)?k:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,Ub).replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Vb).replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,E));if(b)try{return eval(Wb+a+Xb)}catch(c){}g(Error("Invalid JSON string: "+a))};/\uffff/.test("\uffff");var Zb=p.window;var $b=function(){if(J){this.contextsToXhr_={};this.xhrToContexts_={};this.stack_=[]}};m=$b.prototype;m.pushContext=function(a){J&&this.stack_.push(z(a)?a:la(a)?B(a):E)};m.popContext=function(){J&&this.updateDependentContexts_(this.stack_.pop())};m.markXhrOpen=function(a){if(J){a=B(a);for(var b=0;b<this.stack_.length;b++){var c=this.stack_[b];this.addToMap_(this.contextsToXhr_,c,a);this.addToMap_(this.xhrToContexts_,a,c)}}};
m.markXhrClosed=function(a){if(J){a=B(a);delete this.xhrToContexts_[a];for(var b in this.contextsToXhr_){ra(this.contextsToXhr_[b],a);this.contextsToXhr_[b].length==0&&delete this.contextsToXhr_[b]}}};m.updateDependentContexts_=function(a){var b=this.xhrToContexts_[a],c=this.contextsToXhr_[a];b&&c&&qa(b,function(d){qa(c,function(f){this.addToMap_(this.contextsToXhr_,d,f);this.addToMap_(this.xhrToContexts_,f,d)},this)},this)};m.addToMap_=function(a,b,c){a[b]||(a[b]=[]);F(a[b],c)||a[b].push(c)};
var Z=new $b;var bc=function(){return ac()},ac=j,cc=j,dc=j;(function(a,b){ac=a;cc=b;dc=j})(function(){var a=ec();return a?new ActiveXObject(a):new XMLHttpRequest},function(){var a={};if(ec()){a[0]=i;a[1]=i}return a});var fc=j,gc="MSXML2.XMLHTTP.6.0",hc="MSXML2.XMLHTTP.3.0",ic="MSXML2.XMLHTTP",jc="Microsoft.XMLHTTP",ec=function(){if(!fc&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var a=[gc,hc,ic,jc],b=0;b<a.length;b++){var c=a[b];try{new ActiveXObject(c);return fc=c}catch(d){}}g(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return fc};var $=function(){T.call(this);this.headers=new X};D($,T);var kc=[],lc="complete",mc="ready",oc=function(a,b,c,d,f,e){var h=new $;kc.push(h);b&&R(h,lc,b);R(h,mc,na(nc,h));e&&h.setTimeoutInterval(e);h.send(a,c,d,f)},nc=function(a){a.dispose();ra(kc,a)};m=$.prototype;m.active_=k;m.xhr_=j;m.xhrOptions_=j;m.lastUri_=E;m.lastMethod_=E;m.lastErrorCode_=0;m.lastError_=E;m.errorDispatched_=k;m.inSend_=k;m.inOpen_=k;m.inAbort_=k;m.timeoutInterval_=0;m.timeoutId_=j;
m.setTimeoutInterval=function(a){this.timeoutInterval_=Math.max(0,a)};var pc="GET",qc="POST",rc="Content-Type",sc="application/x-www-form-urlencoded;charset=utf-8";
m.send=function(a,b,c,d){if(this.active_)g(Error("[goog.net.XhrIo] Object is active with another request"));b=b||pc;this.lastUri_=a;this.lastError_=E;this.lastErrorCode_=0;this.lastMethod_=b;this.errorDispatched_=k;this.active_=i;this.xhr_=new bc;this.xhrOptions_=dc||(dc=cc());Z.markXhrOpen(this.xhr_);this.xhr_.onreadystatechange=C(this.onReadyStateChange_,this);try{this.inOpen_=i;this.xhr_.open(b,a,i);this.inOpen_=k}catch(f){this.error_(5,f);return}a=c||E;var e=this.headers.clone();d&&Tb(d,function(l,
n){e.set(n,l)});b==qc&&!e.containsKey(rc)&&e.set(rc,sc);Tb(e,function(l,n){this.xhr_.setRequestHeader(n,l)},this);try{if(this.timeoutId_){Zb.clearTimeout(this.timeoutId_);this.timeoutId_=j}if(this.timeoutInterval_>0)this.timeoutId_=Zb.setTimeout(C(this.timeout_,this),this.timeoutInterval_);this.inSend_=i;this.xhr_.send(a);this.inSend_=k}catch(h){this.error_(5,h)}};
m.dispatchEvent=function(a){if(this.xhr_){Z.pushContext(this.xhr_);try{$.superClass_.dispatchEvent.call(this,a)}finally{Z.popContext()}}else $.superClass_.dispatchEvent.call(this,a)};var tc="Timed out after ",uc="ms, aborting",vc="timeout";m.timeout_=function(){if(!(typeof aa=="undefined"))if(this.xhr_){this.lastError_=tc+this.timeoutInterval_+uc;this.lastErrorCode_=8;this.dispatchEvent(vc);this.abort(8)}};
m.error_=function(a,b){this.active_=k;if(this.xhr_){this.inAbort_=i;this.xhr_.abort();this.inAbort_=k}this.lastError_=b;this.lastErrorCode_=a;this.dispatchErrors_();this.cleanUpXhr_()};var wc="error";m.dispatchErrors_=function(){if(!this.errorDispatched_){this.errorDispatched_=i;this.dispatchEvent(lc);this.dispatchEvent(wc)}};var xc="abort";
m.abort=function(a){if(this.xhr_){this.active_=k;this.inAbort_=i;this.xhr_.abort();this.inAbort_=k;this.lastErrorCode_=a||7;this.dispatchEvent(lc);this.dispatchEvent(xc);this.cleanUpXhr_()}};m.disposeInternal=function(){if(this.xhr_){if(this.active_){this.active_=k;this.inAbort_=i;this.xhr_.abort();this.inAbort_=k}this.cleanUpXhr_(i)}$.superClass_.disposeInternal.call(this)};m.onReadyStateChange_=function(){!this.inOpen_&&!this.inSend_&&!this.inAbort_?this.onReadyStateChangeEntryPoint_():this.onReadyStateChangeHelper_()};
m.onReadyStateChangeEntryPoint_=function(){this.onReadyStateChangeHelper_()};var yc="readystatechange",zc="success",Ac=" [";
m.onReadyStateChangeHelper_=function(){if(this.active_)if(!(typeof aa=="undefined"))if(!(this.xhrOptions_[1]&&this.getReadyState()==4&&this.getStatus()==2))if(this.inSend_&&this.getReadyState()==4)Zb.setTimeout(C(this.onReadyStateChange_,this),0);else{this.dispatchEvent(yc);if(this.isComplete()){this.active_=k;if(this.isSuccess()){this.dispatchEvent(lc);this.dispatchEvent(zc)}else{this.lastErrorCode_=6;this.lastError_=this.getStatusText()+Ac+this.getStatus()+Vb;this.dispatchErrors_()}this.cleanUpXhr_()}}};
m.cleanUpXhr_=function(a){if(this.xhr_){this.xhr_.onreadystatechange=this.xhrOptions_[0]?ea:j;var b=this.xhr_;this.xhrOptions_=this.xhr_=j;if(this.timeoutId_){Zb.clearTimeout(this.timeoutId_);this.timeoutId_=j}if(!a){Z.pushContext(b);this.dispatchEvent(mc);Z.popContext()}Z.markXhrClosed(b)}};m.isComplete=function(){return this.getReadyState()==4};m.isSuccess=function(){switch(this.getStatus()){case 0:case 200:case 204:case 304:return i;default:return k}};
m.getReadyState=function(){return this.xhr_?this.xhr_.readyState:0};m.getStatus=function(){try{return this.getReadyState()>2?this.xhr_.status:-1}catch(a){return-1}};m.getStatusText=function(){try{return this.getReadyState()>2?this.xhr_.statusText:E}catch(a){return E}};m.getResponseJson=function(){return this.xhr_?Yb(this.xhr_.responseText):undefined};var Bc,Cc,Dc,Ec,Fc,Gc,Hc="Firefox",Ic="iPhone",Jc="iPod",Kc="Android",Lc="Chrome",Mc="Safari";(function(){Gc=Fc=Ec=Dc=Cc=Bc=k;var a=Oa();if(a)if(a.indexOf(Hc)!=-1)Bc=i;else if(a.indexOf(Va)!=-1)Cc=i;else if(a.indexOf(Ic)!=-1||a.indexOf(Jc)!=-1)Dc=i;else if(a.indexOf(Kc)!=-1)Ec=i;else if(a.indexOf(Lc)!=-1)Fc=i;else if(a.indexOf(Mc)!=-1)Gc=i})();var Nc=function(a,b){this.entityId_=encodeURIComponent(a);if(b)this.sender_=b;else{this.sender_=$;this.sender_.send=oc}this.writeToken_=E;this.options_={};this.counts_={};this.decodeLabel_={};this.selectedReactions_=new X};m=Nc.prototype;var Oc="a",Pc="rx-option",Qc="span",Rc="rx-label",Sc="click",Tc="rx-count",Uc="0";
m.initialize=function(a){a=document.getElementById(a);a=Ib(document,Oc,Pc,a);for(var b=0;b<a.length;b++){var c=a[b],d=Ib(document,Qc,Rc,c)[0];d=Ob(d);this.options_[d]=c;this.decodeLabel_[this.encodeLabel_(d)]=d;var f=C(this.toggle,this,d);R(c,Sc,Ab.partial(f));c=Ib(document,Qc,Tc,c)[0];this.counts_[d]=c;c.innerHTML=Uc}a=C(this.displayRetrievedAnnotations_,this);b=C(this.disableOptions_,this);this.loadExistingReactions_(a,b)};m.setZipitToken_=function(a){this.writeToken_=a};
var Vc="http://www.blogger.com/reviews/json/token",Wc='req={"applicationId":34}';m.loadZipitToken_=function(a){var b=C(this.disableOptions_,this),c=C(this.setZipitToken_,this),d=C(this.toggle,this);this.sender_.send(Vc,function(){if(this.isSuccess()){var f=this.getResponseJson();c(f.channelHeader.token);a&&d(a)}else b()},qc,Wc)};var Xc="http://www.blogger.com/reviews/json/aggregates",Yc='req={"entities":[{"url": "',Zc='","groups":["reactions"]},{"url": "',$c='"}],"applicationId":34}';
m.loadExistingReactions_=function(a,b){this.sender_.send(Xc,function(){this.isSuccess()?a(this.getResponseJson()):b()},qc,Yc+this.entityId_+Zc+this.entityId_+$c)};m.displayRetrievedAnnotations_=function(a){if(a.entityAggregates)for(var b=0;b<a.entityAggregates.length;b++){var c=k;if(c=a.entityAggregates[b].labels)for(var d=0;d<c.length;d++){var f=this.counts_[this.decodeLabel_[c[d].label]];if(f){var e=parseInt(Ob(f),10);if(isNaN(e))e=0;f.innerHTML=e+parseInt(c[d].count,10)}}}};var ad="_";
m.encodeLabel_=function(a){a=a.replace(/([^A-Za-z ])/g,function(b){return ad+b.charCodeAt(0)});return a=a.replace(/([A-Z])/g,function(b){return ad+b.toLowerCase()})};var bd="rx-holder";m.disableOptions_=function(){var a;a=document.getElementById(bd);a=Ib(document,Oc,Pc,a);for(var b=0;b<a.length;b++){var c=a[b];c.style.borderColor=j;wb(c)}};
var cd='"',dd='", ',ed="http://www.blogger.com/reviews/json/write",fd='req={"annotations": [ {"replaceAllLabels":true,"entity": {"url": "',gd='","groups":["reactions"]},"labels":[',hd=']}],"applicationId":34}&token=',id="rx-checked",jd="rx-unchecked";
m.toggle=function(a){if(this.writeToken_==E)this.loadZipitToken_(a);else{if(this.selectedReactions_.get(a)){var b=k;this.selectedReactions_.remove(a)}else{b=i;this.selectedReactions_.set(a,i)}var c=E;Qb(this.selectedReactions_.getKeyIterator(),function(e){c=c+cd+this.encodeLabel_(e)+dd},this);this.sender_.send(ed,ea,qc,fd+this.entityId_+gd+c+hd+this.writeToken_);var d=this.options_[a];if(d){a=this.counts_[a];var f=parseInt(Ob(a),10);if(isNaN(f))f=0;a.innerHTML=b?f+1:f-1;Eb(d,id);Eb(d,jd)}}};ca("BLOG_Annotator",Nc,undefined);Nc.prototype.initialize=Nc.prototype.initialize;ca("BLOG_listenOnce",sb,undefined); })()
